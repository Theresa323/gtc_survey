{{ block title }}

{{ endblock }}
{{ block content }}
    <div> 
        <button class="otree-btn-next btn btn-primary" id="Next_" style="visibility: hidden;">Finish the game</button>
    </div>
    <div> &nbsp; </div>
    <div>
        <iframe src="https://gtc.xaidemo.de/?control&player={% player.unique_id %}&embedded" title="XAI Demo" style="height: 800px;"></iframe>
    </div>
   
    
    <script>
        console.log("Test")
        const interval = setInterval(get_status, 2000)

        const url = "https://gtc.xaidemo.de/api/study/"+String(js_vars.unique_id)+"/has_finished"

        function get_status ()Â {

            $.getJSON(url, function(json){
                console.log( "JSON Data: " + json.has_finished);
                if (json.has_finished == true) {
                const button = document.getElementById("Next_");
                button.style.visibility = "visible";  
                clearInterval(interval)
            }
            });
           
            
        }
    </script>
    
{{ endblock }}
